11월 1일
---

* broadcast-name 
	
	```bash
	# Makefile
	CONTIKI_PROJECT = broadcast-name
	all: $(CONTIKI_PROJECT)

	CONTIKI = ../..
	CONTIKI_WITH_RIME = 1			# for broadcast_open, ...
	include $(CONTIKI)/Makefile.include
	```
	
	```C
	// broadcast-name.c
	#include "contiki.h"
	#include "net/rime/rime.h"
	#include "random.h"

	#include <stdio.h>

	PROCESS(example_broadcast_process, "Broadcast example");			// process def			
	AUTOSTART_PROCESSES(&example_broadcast_process);				// start process(es)

	static void broadcast_recv(struct broadcast_conn *c, const linkaddr_t *from)	// recieve callback
	{
		printf("broadcast message received from %d.%d: '%s'\n",
		from->u8[0], from->u8[1], (char *)packetbuf_dataptr());
	}


	static const struct broadcast_callbacks broadcast_call = {broadcast_recv};
	static struct broadcast_conn broadcast;


	PROCESS_THREAD(example_broadcast_process, ev, data)			// process thread for ex_broadcast_process
	{
	  static struct etimer et;						// event timer

	  PROCESS_EXITHANDLER(broadcast_close(&broadcast));			// set process exit handler 

	  PROCESS_BEGIN();

	  broadcast_open(&broadcast, 129, &broadcast_call);			// open broadcast specifying conn, 

	  while(1) {

		etimer_set(&et, CLOCK_SECOND * 4 + random_rand() % (CLOCK_SECOND * 4));	// delay 2 ~ 4 sec

		PROCESS_WAIT_EVENT_UNTIL(etimer_expired(&et));			// wait etimer to be expired

		packetbuf_copyfrom("Mookeun", 8);											
		broadcast_send(&broadcast);					// broadcast
		printf("broadcast message sent\n");				// print log
	  }

	  PROCESS_END();
	}
	```
	
	![](https://raw.githubusercontent.com/goofcode/UR/master/imgs/cooja_broadcast_name.PNG)
	
	
